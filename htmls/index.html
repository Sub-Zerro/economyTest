<!DOCTYPE HTML>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <title>Название страницы</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">

  <style>
*{
  background-color:#45075c;
}
body {
  justify-content: center;
  text-align: center;
  align-items: center;
  width: 100%;
  height: 100%;
}
.textarea {
  color: white;
  margin-top: 50px;
  font-size: 80px;
  font-family: "Montserrat";
  margin-bottom: 50px;

}

.but {

  justify-content: center;
  height: 300px;
  width: 60%;
  margin-left: auto;
  margin-right: 0;
  margin-top: 10px;
  border-radius: 100px;
  font-size: 50px;
  color: white;
  font-family: "Montserrat";
  margin-top: 50px;
}
#b1 {
  background-color: #4762e5;
}
#b2 {
  background-color: #299dcf;
}
#b3{
 background-color: #edcb51;
}
#b4{
  background-color: #e57747;
}
#b5{

}
  </style>

</head>
  <body>

  <div class="textarea"></div>
  <button class="but" id="b1"></button><br>
  <button class="but" id="b2"></button><br>
  <button class="but" id="b3"></button><br>
  <button class="but" id="b4"></button><br>

  <script>

    // (async ()=>{
    //   let a = await get_num_quiz();
    //   console.log(a);
    // })()


    // const obj = {
    //   q1: {
    //     q: 'Что означает quantity of supply?',
    //     v1: 'Величина предложения',
    //     v2: 'Количество спроса',
    //     v3: 'Величина цены',
    //     v4: 'Количество величины спроса'
    //   },
    //   q2: {
    //     q: 'Как называется количество товара или услуги, которое покупатели готовы купить по данной цене?',
    //     v1: 'Quality of demand',
    //     v2: 'Средний спрос',
    //     v3: 'Количество спроса',
    //     v4: 'Quantity of demand'
    //   },
    //   q3: {
    //     q: 'Как называется зависимость между количеством товара или услуги, которое покупатели хотят и могут купить, и ценой на этот товар в определенное время в определенном месте?',
    //     v1: 'Demand',
    //     v2: 'Quantity of demand',
    //     v3: 'Спрос',
    //     v4: 'Количество предложения'
    //   },
    //   q4: {
    //     q: 'Выберите, как можно выразить функцию спроса из предложенных вариантов',
    //     v1: 'Qd = Q (P)',
    //     v2: 'Pd = P (Q)',
    //     v3: 'Qd = a/P',
    //     v4: 'Qd = 10 – 2p'
    //   },
    //   q5: {
    //     q: 'Как называется количество товаров и услуг, которые продавец готов предложить по данной цене в определенное время в определенном месте?',
    //     v1: 'Quantity of demand',
    //     v2: 'Quantity of supply',
    //     v3: 'Supply',
    //     v4: 'Price'
    //   },
    //   q6: {
    //     q: 'Как называется зависимость между количеством товаров и услуг, которые продавец готов предложить, и ценой на товар в определенное время в определенном месте?',
    //     v1: 'Price',
    //     v2: 'Demand',
    //     v3: 'Quantity',
    //     v4: 'Supply'
    //   },
    //   q7: {
    //     q: 'Что из перечисленных вариантов является законом спроса?',
    //     v1: 'Чем выше спрос, тем выше количество спроса',
    //     v2: 'Чем выше предложение, тем ниже спрос',
    //     v3: 'Чем выше количество, тем выше цена',
    //     v4: 'Чем выше цена, тем ниже величина спроса'
    //   },
    //   q8: {
    //     q: 'Что произойдет с ценой товара, если цена товара-заменителя вырастет?',
    //     v1: 'Упадет',
    //     v2: 'Вырастет',
    //     v3: 'Не изменится'
    //   },
    //   q9: {
    //     q: 'Что произойдет с ценой товара, если цена дополняющего товара упадет?',
    //     v1: 'Упадет',
    //     v2: 'Вырастет',
    //     v3: 'Не изменится'
    //   },
    //   q10: {
    //     q: 'Одинаковым ли будет влияние на предложение увеличения стоимости ресурсов и улучшение технологий производства?',
    //     v1: 'Да',
    //     v2: 'Нет'
    //   },
    //   q11: {
    //     q: 'Что случится с предложением на товар, если цена на товар, производимый на аналогичном оборудовании, вырастет?',
    //     v1: 'Вырастет',
    //     v2: 'Уменьшится',
    //     v3: 'Не изменится'
    //   },
    //   q12: {
    //     q: 'Что произойдет со спросом на шоколад, если налоги на покупателя вырастут?',
    //     v1: 'Вырастет',
    //     v2: 'Уменьшится',
    //     v3: 'Не изменится'
    //   },
    //   q13: {
    //     q: 'Укажите, как соотносятся между собой предложение на лапшу быстрого приготовления и дорогую итальянскую лапшу?',
    //     v1: 'Никак не соотносятся',
    //     v2: 'Прямо пропорционально',
    //     v3: 'Обратно пропорционально'
    //   },
    //   q14: {
    //     q: 'В конце 2020 года начался кризис важнейших элементов для производства электроники. Как это отразилось на рынке компьютеров?',
    //     v1: 'S↑ P↓ Q↑',
    //     v2: 'S↓ P↑ Q↓',
    //     v3: 'D↑ P↑ Q↑',
    //     v4: 'D↓ P↓ Q↓'
    //   },
    //   q15: {
    //     q: 'Что произойдет на рынке мониторов при росте цен на компьютеры?',
    //     v1: 'S↑ P↓ Q↑',
    //     v2: 'S↓ P↑ Q↓',
    //     v3: 'D↑ P↑ Q↑',
    //     v4: 'D↓ P↓ Q↓'
    //   },
    //   q16: {
    //     q: 'Что пройзойдет на рынке чебурекоков при росте предложения на беляши?',
    //     v1: 'S↑ P↓ Q↑',
    //     v2: 'S↓ P↑ Q↓',
    //     v3: 'D↑ P↑ Q↑',
    //     v4: 'D↓ P↓ Q↓'
    //   },
    //   q17: {
    //     q: 'Что случится с кривой предложения на компьютеры при разработке нового оборудования по их производству?',
    //     v1: 'S↑ P↓ Q↑',
    //     v2: 'S↓ P↑ Q↓',
    //     v3: 'D↑ P↑ Q↑',
    //     v4: 'D↓ P↓ Q↓'
    //   }
    // }
    let scope_str = '';
    let number_of_q = 0;
    let name;

    get_num_quiz(number_of_q);

    getName();

    //showQ(number_of_q);




    // (async ()=>{
    //   let num = await prompt("nigger!?");
    //   let url = '/about?';
    //   url+=`r=${num}`;
    //   console.log('url = ', url)
    //   await fetch(url)
    // })()


    function showQ(numQ, obj, num_quiz_f){

      let arr = obj.arr;

      for(let i = 0; i < arr.length; i++){
        console.log(arr[i]);
      }


      let textarea = document.querySelector('.textarea');
      let buttons = document.querySelectorAll('button');

      //let numQ_str = `q${numQ}`;

      textarea.textContent = arr[numQ][0];
      buttons[0].textContent = arr[numQ][1] ? arr[numQ][1] : buttons[0].style.display = 'none';
      buttons[1].textContent = arr[numQ][2] ? arr[numQ][2] : buttons[1].style.display = 'none';
      buttons[2].textContent = arr[numQ][3] ? arr[numQ][3] : buttons[2].style.display = 'none';
      buttons[3].textContent = arr[numQ][4] ? arr[numQ][4] : buttons[3].style.display = 'none';

      for(let i = 0; i < buttons.length; i++){
        buttons[i].onclick = (()=>{
          scope_str+=`${i+1}`;
          if (scope_str.length==(number_of_q+1)){
            if (number_of_q < (arr.length-1)){
              number_of_q++;
              showQ(number_of_q, obj, num_quiz_f);
            }else{
              alert("Ответ записан, вкладку можно закрывать");
              //fetch(`/about?name=${name}&scope=${scope_str}`);
              fetch("/", {
                method: "post",
                headers: {
                  'Accept': 'application/json',
                  'Content-Type': 'application/json'
                },
                //make sure to serialize your JSON body
                body: JSON.stringify({
                  name: name,
                  answer: scope_str,
                  num_quiz: num_quiz_f
                })
              })

            }
          }
        })

      }


    }

    function getName(){
      name = prompt('Введите имя и фамилию');
      alert('Тест без таймера, все задания оцениваются одинаково. Задача - нажать на вариант ответа, который считаешь правильным')
    }

    function get_num_quiz(numQ){
      let num = prompt("Ведите номер квиза");
      if (num=='' || num==null || num==undefined){
        num = alert("Ведите номер квиза");
      }else{

        let f = fetch("/do", {
          method: "post",
          headers:{
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            num: Number(num)
          })
        }).then((res)=>{
          res.json().then((res_end)=>{
            showQ(numQ, res_end, res_end.num_quiz);
          })
        })


      }
    }

    // function get_from_obj(my_object, numofQ){
    //   let num_of_q = numofQ;
    //   return my_object.num_of
    // }


  </script>
</body>
</html>
